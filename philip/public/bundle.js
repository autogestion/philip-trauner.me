var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function m(){return f("")}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let $;function g(t){$=t}const b=[],v=Promise.resolve();let T=!1;const y=[],k=[],x=[];function N(t){k.push(t)}function _(){const t=new Set;do{for(;b.length;){const t=b.shift();g(t),H(t.$$)}for(;y.length;)y.shift()();for(;k.length;){const e=k.pop();t.has(e)||(e(),t.add(e))}}while(b.length);for(;x.length;)x.pop()();T=!1}function H(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(N))}let L;function j(){L={remaining:0,callbacks:[]}}function M(){L.remaining||r(L.callbacks)}function w(t){L.callbacks.push(t)}function C(t,n){const o=n.token={};function r(t,r,s,c){if(n.token!==o)return;n.resolved=s&&{[s]:c};const a=e(e({},n.ctx),n.resolved),i=t&&(n.current=t)(a);n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==r&&t&&(j(),w(()=>{t.d(1),n.blocks[e]=null}),t.o(1),M())}):n.block.d(1),i.c(),i.i&&i.i(1),i.m(n.mount(),n.anchor),_()),n.block=i,n.blocks&&(n.blocks[r]=i)}if((s=t)&&"function"==typeof s.then){if(t.then(t=>{r(n.then,1,n.value,t)},t=>{r(n.catch,2,n.error,t)}),n.current!==n.pending)return r(n.pending,0),!0}else{if(n.current!==n.then)return r(n.then,1,n.value,t),!0;n.resolved={[n.value]:t}}var s}function A(t,e,o){const{fragment:c,on_mount:a,on_destroy:i,after_render:l}=t.$$;c.m(e,o),N(()=>{const e=a.map(n).filter(s);i?i.push(...e):r(e),t.$$.on_mount=[]}),l.forEach(N)}function E(t,e){t.$$.dirty||(b.push(t),T||(T=!0,v.then(_)),t.$$.dirty=o()),t.$$.dirty[e]=!0}function O(e,n,s,c,a,i){const l=$;g(e);const p=n.props||{},u=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:null};let f=!1;var d;u.ctx=s?s(e,p,(t,n)=>{u.ctx&&a(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),f&&E(e,t))}):p,u.update(),f=!0,r(u.before_render),u.fragment=c(u.ctx),n.target&&(n.hydrate?u.fragment.l((d=n.target,Array.from(d.childNodes))):u.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),A(e,n.target,n.anchor),_()),g(l)}class P{$destroy(){var e,n;n=!0,(e=this).$$&&(r(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function Z(t,e,n){const o=Object.create(t);return o.tag=e[n],o}function I(t){var e,n,o,r=t.tag.name;return{c(){e=u("a"),n=f(r),e.className="tag",e.href=o=t.tag.href},m(t,o){i(t,e,o),a(e,n)},p(t,s){t.post&&r!==(r=s.tag.name)&&h(n,r),t.post&&o!==(o=s.tag.href)&&(e.href=o)},d(t){t&&l(e)}}}function q(e){for(var n,o,r,s,c,m,$,g,b,v,T,y,k,x,N,_,H,L=e.post.attributedTo.split("/").pop(),j=e.post.published.replace("T"," ").replace("Z"," "),M=e.post.content,w=e.post.tag,C=[],A=0;A<w.length;A+=1)C[A]=I(Z(e,w,A));return{c(){n=u("div"),o=u("a"),r=f("Create"),c=f(" by user "),m=u("a"),$=f(L),b=d(),(v=u("span")).textContent="·",T=d(),y=u("span"),k=f(j),x=d(),N=u("div");for(var t=0;t<C.length;t+=1)C[t].c();_=d(),H=u("p"),o.href=s=e.post.id,m.href=g=e.post.attributedTo,v.className="metadata-seperator",n.className="metadata",N.className="tags"},m(t,e){i(t,n,e),a(n,o),a(o,r),a(n,c),a(n,m),a(m,$),a(n,b),a(n,v),a(n,T),a(n,y),a(y,k),i(t,x,e),i(t,N,e);for(var s=0;s<C.length;s+=1)C[s].m(N,null);i(t,_,e),i(t,H,e),H.innerHTML=M},p(t,e){if(t.post&&s!==(s=e.post.id)&&(o.href=s),t.post&&L!==(L=e.post.attributedTo.split("/").pop())&&h($,L),t.post&&g!==(g=e.post.attributedTo)&&(m.href=g),t.post&&j!==(j=e.post.published.replace("T"," ").replace("Z"," "))&&h(k,j),t.post){w=e.post.tag;for(var n=0;n<w.length;n+=1){const o=Z(e,w,n);C[n]?C[n].p(t,o):(C[n]=I(o),C[n].c(),C[n].m(N,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=w.length}t.post&&M!==(M=e.post.content)&&(H.innerHTML=M)},i:t,o:t,d(t){t&&(l(n),l(x),l(N)),p(C,t),t&&(l(_),l(H))}}}function B(t,e,n){let{post:o}=e;return t.$set=(t=>{"post"in t&&n("post",o=t.post)}),{post:o}}class F extends P{constructor(t){super(),O(this,t,B,q,c,["post"])}}function G(t){var n,o,r;let s={ctx:t,current:null,pending:z,then:R,catch:D,value:"fpost",error:"null",blocks:Array(3)};return C(o=t.fpost,s),{c(){n=m(),s.block.c()},m(t,e){i(t,n,e),s.block.m(t,s.anchor=e),s.mount=(()=>n.parentNode),s.anchor=n,r=!0},p(n,r){t=r,s.ctx=t,"fpost"in n&&o!==(o=t.fpost)&&C(o,s)||s.block.p(n,e(e({},t),s.resolved))},i(t){r||(s.block.i(),r=!0)},o(t){for(let t=0;t<3;t+=1){const e=s.blocks[t];e&&e.o()}r=!1},d(t){t&&l(n),s.block.d(t),s=null}}}function S(t){var e,n,o,r,s=new F({props:{post:t.post.object}});return{c(){e=u("li"),(n=u("h2")).textContent=".",o=d(),s.$$.fragment.c(),n.id="",e.className="post"},m(t,c){i(t,e,c),a(e,n),a(e,o),A(s,e,null),r=!0},p(t,e){var n={};t.post&&(n.post=e.post.object),s.$set(n)},i(t){r||(s.$$.fragment.i(t),r=!0)},o(t){s.$$.fragment.o(t),r=!1},d(t){t&&l(e),s.$destroy()}}}function D(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function R(t){var e,n,o,r,s,c,p,m,$,g,b,v,T,y,k,x,N,_,H,L=t.post.type,j=t.post.actor.split("/").slice(-1)[0],M=t.post.published.replace("T"," ").replace("Z"," "),w=new F({props:{post:t.fpost}});return{c(){e=u("li"),n=u("div"),(o=u("h2")).textContent=".",r=d(),s=u("a"),c=f(L),m=f(" by user "),$=u("a"),g=f(j),v=d(),(T=u("span")).textContent="·",y=d(),k=u("span"),x=f(M),N=d(),_=u("div"),w.$$.fragment.c(),o.id="",s.href=p=t.post.id,$.href=b=t.post.actor,T.className="metadata-seperator",n.className="metadata",_.className="reaction svelte-1gf6p2q",e.className="post"},m(t,l){i(t,e,l),a(e,n),a(n,o),a(n,r),a(n,s),a(s,c),a(n,m),a(n,$),a($,g),a(n,v),a(n,T),a(n,y),a(n,k),a(k,x),a(e,N),a(e,_),A(w,_,null),H=!0},p(t,e){H&&!t.post||L===(L=e.post.type)||h(c,L),H&&!t.post||p===(p=e.post.id)||(s.href=p),H&&!t.post||j===(j=e.post.actor.split("/").slice(-1)[0])||h(g,j),H&&!t.post||b===(b=e.post.actor)||($.href=b),H&&!t.post||M===(M=e.post.published.replace("T"," ").replace("Z"," "))||h(x,M);var n={};t.fpost&&(n.post=e.fpost),w.$set(n)},i(t){H||(w.$$.fragment.i(t),H=!0)},o(t){w.$$.fragment.o(t),H=!1},d(t){t&&l(e),w.$destroy()}}}function z(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function J(t){var e,n,o,r,s=[S,G],c=[];function a(t){return 0==t.fetched_post?0:1}return e=a(t),n=c[e]=s[e](t),{c(){n.c(),o=m()},m(t,n){c[e].m(t,n),i(t,o,n),r=!0},p(t,r){var i=e;(e=a(r))===i?c[e].p(t,r):(j(),w(()=>{c[i].d(1),c[i]=null}),n.o(1),M(),(n=c[e])||(n=c[e]=s[e](r)).c(),n.i(1),n.m(o.parentNode,o))},i(t){r||(n&&n.i(),r=!0)},o(t){n&&n.o(),r=!1},d(t){c[e].d(t),t&&l(o)}}}function K(t,e,n){let o,{post:r}=e,s=!1;return["Announce","Like"].includes(r.type)&&(n("fpost",o=fetch(r.object,{headers:{Accept:"application/activity+json"}}).then(t=>t.json())),n("fetched_post",s=!0)),t.$set=(t=>{"post"in t&&n("post",r=t.post)}),{post:r,fpost:o,fetched_post:s}}class Q extends P{constructor(t){super(),O(this,t,K,J,c,["post"])}}function U(t,e,n){const o=Object.create(t);return o.post=e[n],o}function V(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function W(t){for(var e,n,o=t.value,r=[],s=0;s<o.length;s+=1)r[s]=X(U(t,o,s));function c(t,e,n){r[t]&&(e&&w(()=>{r[t].d(e),r[t]=null}),r[t].o(n))}return{c(){e=u("ul");for(var t=0;t<r.length;t+=1)r[t].c();e.className="post-list"},m(t,o){i(t,e,o);for(var s=0;s<r.length;s+=1)r[s].m(e,null);n=!0},p(t,n){if(t.posts){o=n.value;for(var s=0;s<o.length;s+=1){const c=U(n,o,s);r[s]?(r[s].p(t,c),r[s].i(1)):(r[s]=X(c),r[s].c(),r[s].i(1),r[s].m(e,null))}for(j();s<r.length;s+=1)c(s,1,1);M()}},i(t){if(!n){for(var e=0;e<o.length;e+=1)r[e].i();n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)c(t,0);n=!1},d(t){t&&l(e),p(r,t)}}}function X(t){var e,n=new Q({props:{post:t.post}});return{c(){n.$$.fragment.c()},m(t,o){A(n,t,o),e=!0},p(t,e){var o={};t.posts&&(o.post=e.post),n.$set(o)},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function Y(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function tt(t){var n,o,r;let s={ctx:t,current:null,pending:Y,then:W,catch:V,value:"value",error:"null",blocks:Array(3)};return C(o=t.posts,s),{c(){n=m(),s.block.c()},m(t,e){i(t,n,e),s.block.m(t,s.anchor=e),s.mount=(()=>n.parentNode),s.anchor=n,r=!0},p(n,r){t=r,s.ctx=t,"posts"in n&&o!==(o=t.posts)&&C(o,s)||s.block.p(n,e(e({},t),s.resolved))},i(t){r||(s.block.i(),r=!0)},o(t){for(let t=0;t<3;t+=1){const e=s.blocks[t];e&&e.o()}r=!1},d(t){t&&l(n),s.block.d(t),s=null}}}function et(t,e,n){let{posts:o}=e;return t.$set=(t=>{"posts"in t&&n("posts",o=t.posts)}),{posts:o}}class nt extends P{constructor(t){super(),O(this,t,et,tt,c,["posts"])}}function ot(t){var e,n,o;return{c(){(e=u("li")).innerHTML='<a href="/local">Local Timeline</a>',n=d(),(o=u("li")).innerHTML='<a href="/fed">Federated Timeline</a>'},m(t,r){i(t,e,r),i(t,n,r),i(t,o,r)},d(t){t&&(l(e),l(n),l(o))}}}function rt(t){var e,n,o,r,s,c,p,f,m,h,$,g,b,v,T,y,k,x,N,_,H,L,j,M=1==t.pgi&&ot(),w=new nt({props:{posts:t.localTimeline}}),C=new nt({props:{posts:t.federatedTimeline}});return{c(){e=u("header"),n=u("ul"),M&&M.c(),o=d(),(r=u("li")).innerHTML='<a href="/home">Home</a>',s=d(),(c=u("li")).innerHTML='<a href="/about">About</a>',p=d(),(f=u("li")).innerHTML='<a href="/dot-dot-dot">...</a>',m=d(),h=u("div"),w.$$.fragment.c(),$=d(),g=u("div"),C.$$.fragment.c(),b=d(),v=u("div"),T=d(),(y=u("div")).innerHTML='<span class="about-greeting">Hi!</span>\n\t\t\t\t<p>DESCRIPTION</p>',k=d(),x=u("div"),N=d(),_=u("hr"),H=d(),(L=u("footer")).innerHTML='<div class="left-column"><h2>PubGate-Philip</h2>\n\t\t\t        <p>Gotta<br>go<br>Fast</p></div>\n\t\t\t    <div class="right-column"><h2>Contact</h2>\n\t\t\t        <p></p></div>',h.id="local",h.className="hidden content",g.id="fed",g.className="hidden content",v.id="home",v.className="hidden content",y.id="about",y.className="hidden content",x.id="dot-dot-dot",x.className="hidden content",_.className="separator",L.className="content"},m(t,l){i(t,e,l),a(e,n),M&&M.m(n,null),a(n,o),a(n,r),a(n,s),a(n,c),a(n,p),a(n,f),i(t,m,l),i(t,h,l),A(w,h,null),i(t,$,l),i(t,g,l),A(C,g,null),i(t,b,l),i(t,v,l),i(t,T,l),i(t,y,l),i(t,k,l),i(t,x,l),i(t,N,l),i(t,_,l),i(t,H,l),i(t,L,l),j=!0},p(t,e){1==e.pgi?M||((M=ot()).c(),M.m(n,o)):M&&(M.d(1),M=null);var r={};t.localTimeline&&(r.posts=e.localTimeline),w.$set(r);var s={};t.federatedTimeline&&(s.posts=e.federatedTimeline),C.$set(s)},i(t){j||(w.$$.fragment.i(t),C.$$.fragment.i(t),j=!0)},o(t){w.$$.fragment.o(t),C.$$.fragment.o(t),j=!1},d(t){t&&l(e),M&&M.d(),t&&(l(m),l(h)),w.$destroy(),t&&(l($),l(g)),C.$destroy(),t&&(l(b),l(v),l(T),l(y),l(k),l(x),l(N),l(_),l(H),l(L))}}}function st(t,e,n){const o=(t,e)=>t?fetch(base_url+e).then(t=>t.json()).then(t=>t.first).then(t=>t.orderedItems):[];let{localTimeline:r=o(pubgate_instance,"/timeline/local"),federatedTimeline:s=o(pubgate_instance,"/timeline/federated"),pgi:c=pubgate_instance}=e;return t.$set=(t=>{"localTimeline"in t&&n("localTimeline",r=t.localTimeline),"federatedTimeline"in t&&n("federatedTimeline",s=t.federatedTimeline),"pgi"in t&&n("pgi",c=t.pgi)}),{localTimeline:r,federatedTimeline:s,pgi:c}}return new class extends P{constructor(t){super(),O(this,t,st,rt,c,["localTimeline","federatedTimeline","pgi"])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
