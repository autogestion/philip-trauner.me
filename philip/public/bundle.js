var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(){return f("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}let v;function g(t){v=t}const $=[],_=Promise.resolve();let y=!1;const k=[],x=[],N=[];function T(t){x.push(t)}function j(){const t=new Set;do{for(;$.length;){const t=$.shift();g(t),C(t.$$)}for(;k.length;)k.shift()();for(;x.length;){const e=x.pop();t.has(e)||(e(),t.add(e))}}while($.length);for(;N.length;)N.pop()();y=!1}function C(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(T))}let L;function w(){L={remaining:0,callbacks:[]}}function E(){L.remaining||r(L.callbacks)}function A(t){L.callbacks.push(t)}function H(t,n){const o=n.token={};function r(t,r,c,a){if(n.token!==o)return;n.resolved=c&&{[c]:a};const s=e(e({},n.ctx),n.resolved),i=t&&(n.current=t)(s);n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==r&&t&&(w(),A(()=>{t.d(1),n.blocks[e]=null}),t.o(1),E())}):n.block.d(1),i.c(),i.i&&i.i(1),i.m(n.mount(),n.anchor),j()),n.block=i,n.blocks&&(n.blocks[r]=i)}if((c=t)&&"function"==typeof c.then){if(t.then(t=>{r(n.then,1,n.value,t)},t=>{r(n.catch,2,n.error,t)}),n.current!==n.pending)return r(n.pending,0),!0}else{if(n.current!==n.then)return r(n.then,1,n.value,t),!0;n.resolved={[n.value]:t}}var c}function M(t,e,o){const{fragment:a,on_mount:s,on_destroy:i,after_render:l}=t.$$;a.m(e,o),T(()=>{const e=s.map(n).filter(c);i?i.push(...e):r(e),t.$$.on_mount=[]}),l.forEach(T)}function O(t,e){t.$$.dirty||($.push(t),y||(y=!0,_.then(j)),t.$$.dirty=o()),t.$$.dirty[e]=!0}function Z(e,n,c,a,s,i){const l=v;g(e);const p=n.props||{},u=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:null};let f=!1;var d;u.ctx=c?c(e,p,(t,n)=>{u.ctx&&s(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),f&&O(e,t))}):p,u.update(),f=!0,r(u.before_render),u.fragment=a(u.ctx),n.target&&(n.hydrate?u.fragment.l((d=n.target,Array.from(d.childNodes))):u.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),M(e,n.target,n.anchor),j()),g(l)}class P{$destroy(){var e,n;n=!0,(e=this).$$&&(r(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function q(t,e,n){const o=Object.create(t);return o.tag=e[n],o}function B(t){for(var e,n,o,r,c,a,h,m,v,g,$,_,y,k,x,N,T,j=t.post.attributedTo.split("/").pop(),C=t.post.published.replace("T"," ").replace("Z"," "),L=t.post.content,w=t.post.tag,E=[],A=0;A<w.length;A+=1)E[A]=G(q(t,w,A));return{c(){e=u("div"),n=u("a"),o=f("Create"),c=f(" by user "),a=u("a"),h=f(j),v=d(),(g=u("span")).textContent="·",$=d(),_=u("span"),y=f(C),k=d(),x=u("div");for(var s=0;s<E.length;s+=1)E[s].c();N=d(),T=u("p"),n.href=r=t.post.id,a.href=m=t.post.attributedTo,g.className="metadata-seperator",e.className="metadata",x.className="tags"},m(t,r){i(t,e,r),s(e,n),s(n,o),s(e,c),s(e,a),s(a,h),s(e,v),s(e,g),s(e,$),s(e,_),s(_,y),i(t,k,r),i(t,x,r);for(var l=0;l<E.length;l+=1)E[l].m(x,null);i(t,N,r),i(t,T,r),T.innerHTML=L},p(t,e){if(t.post&&r!==(r=e.post.id)&&(n.href=r),t.post&&j!==(j=e.post.attributedTo.split("/").pop())&&b(h,j),t.post&&m!==(m=e.post.attributedTo)&&(a.href=m),t.post&&C!==(C=e.post.published.replace("T"," ").replace("Z"," "))&&b(y,C),t.post){w=e.post.tag;for(var o=0;o<w.length;o+=1){const n=q(e,w,o);E[o]?E[o].p(t,n):(E[o]=G(n),E[o].c(),E[o].m(x,null))}for(;o<E.length;o+=1)E[o].d(1);E.length=w.length}t.post&&L!==(L=e.post.content)&&(T.innerHTML=L)},d(t){t&&(l(e),l(k),l(x)),p(E,t),t&&(l(N),l(T))}}}function F(t){var e;return{c(){e=u("p")},m(n,o){i(n,e,o),e.innerHTML=t.post},p(t,n){t.post&&(e.innerHTML=n.post)},d(t){t&&l(e)}}}function G(t){var e,n,o,r=t.tag.name;return{c(){e=u("a"),n=f(r),e.className="tag",e.href=o=t.tag.href},m(t,o){i(t,e,o),s(e,n)},p(t,c){t.post&&r!==(r=c.tag.name)&&b(n,r),t.post&&o!==(o=c.tag.href)&&(e.href=o)},d(t){t&&l(e)}}}function D(e){var n;function o(t){return"string"==typeof t.post?F:B}var r=o(e),c=r(e);return{c(){c.c(),n=h()},m(t,e){c.m(t,e),i(t,n,e)},p(t,e){r===(r=o(e))&&c?c.p(t,e):(c.d(1),(c=r(e))&&(c.c(),c.m(n.parentNode,n)))},i:t,o:t,d(t){c.d(t),t&&l(n)}}}function I(t,e,n){let{post:o}=e;return t.$set=(t=>{"post"in t&&n("post",o=t.post)}),{post:o}}class S extends P{constructor(t){super(),Z(this,t,I,D,a,["post"])}}function z(t){var e,n,o,r,c,a,p,h,m,v,g,$,_,y,k,x,N,T=t.post.type,j=t.post.actor.split("/").slice(-1)[0],C=t.post.published&&K(t),L=new S({props:{post:t.post_object}});return{c(){e=u("li"),n=u("div"),(o=u("h2")).textContent=".",r=d(),c=u("a"),a=f(T),h=f(" by user "),m=u("a"),v=f(j),$=d(),(_=u("span")).textContent="·",y=d(),C&&C.c(),k=d(),x=u("div"),L.$$.fragment.c(),o.id="",c.href=p=t.post.id,m.href=g=t.post.actor,_.className="metadata-seperator",n.className="metadata",x.className="reaction svelte-1gf6p2q",e.className="post"},m(t,l){i(t,e,l),s(e,n),s(n,o),s(n,r),s(n,c),s(c,a),s(n,h),s(n,m),s(m,v),s(n,$),s(n,_),s(n,y),C&&C.m(n,null),s(e,k),s(e,x),M(L,x,null),N=!0},p(t,e){N&&!t.post||T===(T=e.post.type)||b(a,T),N&&!t.post||p===(p=e.post.id)||(c.href=p),N&&!t.post||j===(j=e.post.actor.split("/").slice(-1)[0])||b(v,j),N&&!t.post||g===(g=e.post.actor)||(m.href=g),e.post.published?C?C.p(t,e):((C=K(e)).c(),C.m(n,null)):C&&(C.d(1),C=null);var o={};t.post_object&&(o.post=e.post_object),L.$set(o)},i(t){N||(L.$$.fragment.i(t),N=!0)},o(t){L.$$.fragment.o(t),N=!1},d(t){t&&l(e),C&&C.d(),L.$destroy()}}}function J(t){var e,n,o,r,c=new S({props:{post:t.post.object}});return{c(){e=u("li"),(n=u("h2")).textContent=".",o=d(),c.$$.fragment.c(),n.id="",e.className="post"},m(t,a){i(t,e,a),s(e,n),s(e,o),M(c,e,null),r=!0},p(t,e){var n={};t.post&&(n.post=e.post.object),c.$set(n)},i(t){r||(c.$$.fragment.i(t),r=!0)},o(t){c.$$.fragment.o(t),r=!1},d(t){t&&l(e),c.$destroy()}}}function K(t){var e,n,o=t.post.published.replace("T"," ").replace("Z"," ");return{c(){e=u("span"),n=f(o)},m(t,o){i(t,e,o),s(e,n)},p(t,e){t.post&&o!==(o=e.post.published.replace("T"," ").replace("Z"," "))&&b(n,o)},d(t){t&&l(e)}}}function Q(t){var e,n,o,r,c=[J,z],a=[];function s(t){return 0==t.fetched_post?0:1}return e=s(t),n=a[e]=c[e](t),{c(){n.c(),o=h()},m(t,n){a[e].m(t,n),i(t,o,n),r=!0},p(t,r){var i=e;(e=s(r))===i?a[e].p(t,r):(w(),A(()=>{a[i].d(1),a[i]=null}),n.o(1),E(),(n=a[e])||(n=a[e]=c[e](r)).c(),n.i(1),n.m(o.parentNode,o))},i(t){r||(n&&n.i(),r=!0)},o(t){n&&n.o(),r=!1},d(t){a[e].d(t),t&&l(o)}}}function R(t,e,n){let o,r,{post:c}=e,a=!1;return["Announce","Like"].includes(c.type)&&(0==pubgate_instance?(n("fpost",o=fetch(c.object,{headers:{Accept:"application/activity+json"}}).then(t=>t.json())),n("post_object",r=(t=>t.object))):n("post_object",r=c.object),n("fetched_post",a=!0)),t.$set=(t=>{"post"in t&&n("post",c=t.post)}),{post:c,post_object:r,fetched_post:a}}class U extends P{constructor(t){super(),Z(this,t,R,Q,a,["post"])}}function V(t,e,n){const o=Object.create(t);return o.post=e[n],o}function W(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function X(t){for(var e,n,o=t.value,r=[],c=0;c<o.length;c+=1)r[c]=Y(V(t,o,c));function a(t,e,n){r[t]&&(e&&A(()=>{r[t].d(e),r[t]=null}),r[t].o(n))}return{c(){e=u("ul");for(var t=0;t<r.length;t+=1)r[t].c();e.className="post-list"},m(t,o){i(t,e,o);for(var c=0;c<r.length;c+=1)r[c].m(e,null);n=!0},p(t,n){if(t.posts){o=n.value;for(var c=0;c<o.length;c+=1){const a=V(n,o,c);r[c]?(r[c].p(t,a),r[c].i(1)):(r[c]=Y(a),r[c].c(),r[c].i(1),r[c].m(e,null))}for(w();c<r.length;c+=1)a(c,1,1);E()}},i(t){if(!n){for(var e=0;e<o.length;e+=1)r[e].i();n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)a(t,0);n=!1},d(t){t&&l(e),p(r,t)}}}function Y(t){var e,n=new U({props:{post:t.post}});return{c(){n.$$.fragment.c()},m(t,o){M(n,t,o),e=!0},p(t,e){var o={};t.posts&&(o.post=e.post),n.$set(o)},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function tt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function et(t){var n,o,r;let c={ctx:t,current:null,pending:tt,then:X,catch:W,value:"value",error:"null",blocks:Array(3)};return H(o=t.posts,c),{c(){n=h(),c.block.c()},m(t,e){i(t,n,e),c.block.m(t,c.anchor=e),c.mount=(()=>n.parentNode),c.anchor=n,r=!0},p(n,r){t=r,c.ctx=t,"posts"in n&&o!==(o=t.posts)&&H(o,c)||c.block.p(n,e(e({},t),c.resolved))},i(t){r||(c.block.i(),r=!0)},o(t){for(let t=0;t<3;t+=1){const e=c.blocks[t];e&&e.o()}r=!1},d(t){t&&l(n),c.block.d(t),c=null}}}function nt(t,e,n){let{active_tab:o}=e,r={local:"/timeline/local?cached=1",federated:"/timeline/federated?cached=1"};let c;return t.$set=(t=>{"active_tab"in t&&n("active_tab",o=t.active_tab)}),t.$$.update=((t={pubgate_url_map:1,active_tab:1})=>{(t.pubgate_url_map||t.active_tab)&&n("posts",c=((t,e)=>t?fetch(base_url+e).then(t=>t.json()).then(t=>t.first).then(t=>t.orderedItems):[])(pubgate_instance,r[o]))}),{active_tab:o,posts:c}}class ot extends P{constructor(t){super(),Z(this,t,nt,et,a,["active_tab"])}}function rt(e){var n,o,c,a,p,f;return{c(){n=u("li"),(o=u("a")).textContent="Local Timeline",c=d(),a=u("li"),(p=u("a")).textContent="Federated Timeline",o.href="#local",o.className="header-selected",p.href="#federated",f=[m(o,"click",e.selectTab),m(p,"click",e.selectTab)]},m(t,e){i(t,n,e),s(n,o),i(t,c,e),i(t,a,e),s(a,p)},p:t,d(t){t&&(l(n),l(c),l(a)),r(f)}}}function ct(t){var e,n,o,c,a,p,f,h,b,v,g,$,_,y,k,x,N,T,j,C=1==t.pgi&&rt(t),L=new ot({props:{active_tab:t.active_tab}});return{c(){e=u("header"),n=u("ul"),C&&C.c(),o=d(),c=u("li"),(a=u("a")).textContent="Home",p=d(),f=u("li"),(h=u("a")).textContent="About",b=d(),v=u("li"),(g=u("a")).textContent="...",$=d(),_=u("div"),L.$$.fragment.c(),y=d(),k=u("hr"),x=d(),(N=u("footer")).innerHTML='<div class="left-column"><h2>PubGate-Philip</h2>\n\t\t\t        <p>Gotta<br>go<br>Fast</p></div>\n\t\t\t    <div class="right-column"><h2>Contact</h2>\n\t\t\t        <p></p></div>',a.href="#home",h.href="#about",g.href="#dot-dot-dot",_.className="content",k.className="separator",N.className="content",j=[m(a,"click",t.selectTab),m(h,"click",t.selectTab),m(g,"click",t.selectTab)]},m(t,r){i(t,e,r),s(e,n),C&&C.m(n,null),s(n,o),s(n,c),s(c,a),s(n,p),s(n,f),s(f,h),s(n,b),s(n,v),s(v,g),i(t,$,r),i(t,_,r),M(L,_,null),i(t,y,r),i(t,k,r),i(t,x,r),i(t,N,r),T=!0},p(t,e){1==e.pgi?C?C.p(t,e):((C=rt(e)).c(),C.m(n,o)):C&&(C.d(1),C=null);var r={};t.active_tab&&(r.active_tab=e.active_tab),L.$set(r)},i(t){T||(L.$$.fragment.i(t),T=!0)},o(t){L.$$.fragment.o(t),T=!1},d(t){t&&l(e),C&&C.d(),t&&(l($),l(_)),L.$destroy(),t&&(l(y),l(k),l(x),l(N)),r(j)}}}function at(t,e,n){let{active_tab:o="local",pgi:r=pubgate_instance}=e;return t.$set=(t=>{"active_tab"in t&&n("active_tab",o=t.active_tab),"pgi"in t&&n("pgi",r=t.pgi)}),{active_tab:o,pgi:r,selectTab:function(t){t.preventDefault(),n("active_tab",o=this.href.split("#")[1]),Array.prototype.forEach.call(this.parentNode.parentNode.children,(t,e)=>{t.firstChild.href.split("#")[1]!==o&&t.firstChild.classList.remove("header-selected")}),this.classList.add("header-selected")}}}return new class extends P{constructor(t){super(),Z(this,t,at,ct,a,["active_tab","pgi"])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
