{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/Publish.svelte",
    "../src/Post.svelte",
    "../src/PostBody.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { getCreateObject, getHashTag } from \"./utils/pubGate\";\n\n  export let reply = null;\n  export let session;\n\n  let inProgress = false;\n  let content = \"\";\n\n  const hashTagMatcher = /(^|\\W)(#[a-z\\d][\\w-]*)/gi;\n\n  const wrapHashTagsWithLink = text =>\n    text.match(hashTagMatcher)\n      ? text.replace(hashTagMatcher, '$1<a href=\"\" rel=\"tag\">$2</a>')\n      : text;\n\n  const getAllHashTags = text => text.match(hashTagMatcher) || [];\n\n  const publish = async ev => {\n    ev.preventDefault();\n\n    inProgress = true;\n    let tags = getAllHashTags(content)\n      .map(v => v.trim())\n      .map(getHashTag);\n\n    const data = wrapHashTagsWithLink(content);\n\n    let ap_object = getCreateObject(data, tags);\n\n    if (reply) {\n      ap_object.object.inReplyTo = reply.id;\n      ap_object.cc = [reply.attributedTo];\n    }\n\n    try {\n      const response = await fetch(session.user.outbox, {\n        method: \"POST\",\n        body: JSON.stringify(ap_object),\n        headers: { Authorization: \"Bearer \" + session.token },\n      });\n      const data = await response.json();\n    } catch (e) {\n      console.log(e);\n    }\n\n    inProgress = false;\n    content = \"\";\n  };\n</script>\n\n<style>\n  textarea {\n    width: 100%;\n  }\n</style>\n\n<form on:submit={publish}>\n\n  <fieldset class=\"form-group\">\n    <textarea\n      class=\"form-control\"\n      placeholder=\"Write your text here\"\n      bind:value={content} />\n  </fieldset>\n\n  <button\n    class=\"btn btn-sm pull-xs-right btn-info\"\n    disabled={!content || inProgress}>\n    Publish\n  </button>\n\n</form>\n",
    "\n<script>\n\texport let post;\n\texport let session;\n\timport PostBody from \"./PostBody.svelte\";\n\timport xhr from \"./utils/xhr\";\n\n\tlet fpost;\n\tlet post_object;\n\tlet fetched_post = false;\n\n\tif ([\"Announce\", \"Like\"].includes(post.type)) {\n\t    if (typeof post.object === \"string\") {\n\t        fpost = xhr(post.object);\n            // fpost = fetch(post.object, { headers: {\n            //     \"Accept\": \"application/activity+json\"\n            // }}).then(d => d.json());\n            post_object = fpost => fpost.object;\n\t    } else {\n\t        post_object = post.object;\n\t    }\n\n\t    fetched_post = true\n    }\n</script>\n\n<style>\n    .reaction {\n        margin-left: 30px;\n    }\n</style>\n\n{#if fetched_post == false}\n<li class=\"post\">\n    <h2 id=\"\"> . </h2>\n    <PostBody post={post.object} session={session}/>\n</li>\n\n{:else}\n<li class=\"post\">\n    <div class=\"metadata\">\n        <h2 id=\"\"> . </h2>\n        <a href=\"{post.id}\">{post.type}</a> by user <a href=\"{ post.actor }\">{ post.actor.split('/').slice(-1)[0] }</a>\n        <span class=\"metadata-seperator\">·</span>\n\n        {#if post.published }\n        <span>{ post.published.replace(\"T\", \" \").replace(\"Z\", \" \") }</span>\n        {/if}\n    </div>\n    <div class=\"reaction\">\n        {#if post_object.id}\n            <PostBody post={post_object} session={session}/>\n        {:else}\n            <a href=\"{post.object}\">{post.object}</a>\n        {/if}\n    </div>\n</li>\n{/if}\n",
    "\n<script>\n\texport let post;\n\texport let session;\n\timport Publish from \"./Publish.svelte\";\n\n    let showPublish = false;\n    const togglePublish = ev => {\n        ev.preventDefault();\n        showPublish = !showPublish\n    };\n\n</script>\n<style>\n.reactionz {\n    font-size: 18px;\n}\n.rs {\n    border-bottom: 1px solid #dadde1;\n    display: flex;\n}\n.ra {\n    padding: 4px 0;\n    display: flex;\n}\n\n.rs_left {\n    flex-grow: 1;\n}\n.rs_right {\n    margin-left: 7px;\n}\n.ra_item {\n    flex: 1 0;\n    align-items: center;\n    color: #606770;\n    display: flex;\n    font-weight: 600;\n    height: 32px;\n    justify-content: center;\n}\n\n</style>\n\n\n{#if typeof post === 'string'}\n    <p>{@html post }</p>\n\n{:else}\n    <div class=\"metadata\">\n\n        <a href=\"{post.id}\">{post.type}</a> by user <a href=\"{ post.attributedTo }\">{ post.attributedTo.split('/').pop() }</a>\n        <span class=\"metadata-seperator\">·</span>\n        <span>{ post.published.replace(\"T\", \" \").replace(\"Z\", \" \")}</span>\n    </div>\n    {#if post.tag}\n        <div class=\"tags\">\n        {#each post.tag as tag}\n            {#if tag.type == 'Hashtag'}\n                <a class=\"tag\" href=\"{ tag.href }\">{ tag.name }</a>\n            {/if}\n        {/each}\n        </div>\n    {/if}\n\n    <p>{@html post.content }</p>\n    {#if post.attachment}\n        {#each post.attachment as attachment}\n            {#if attachment.type === \"Document\" && attachment.mediaType.startsWith(\"image\")}\n                <img src={attachment.url} >\n            {/if}\n        {/each}\n    {/if}\n{/if}\n\n<div class=\"reactionz\">\n    <div class=\"rs\">\n           <a class=\"rs_left\" href=\"\">N likes</a>\n           <a class=\"rs_right\" href=\"\">N comments</a>\n           <a class=\"rs_right\" href=\"\">N announces</a>\n    </div>\n    {#if session.user }\n        <div class=\"ra\">\n            <a class=\"ra_item\" href=\"\">Like</a>\n                 <a class=\"ra_item\" href=\"\" on:click={togglePublish}>Add comment</a>\n                 <a class=\"ra_item\" href=\"\" >Announce</a>\n             </div>\n        {#if showPublish}\n            <Publish reply={post} session={session}/>\n        {/if}\n    {/if}\n</div>\n\n\n\n"
  ],
  "names": [],
  "mappings": "AAoDE,QAAQ,eAAC,CAAC,AACR,KAAK,CAAE,IAAI,AACb,CAAC;AC3BC,SAAS,eAAC,CAAC,AACP,WAAW,CAAE,IAAI,AACrB,CAAC;ACfL,UAAU,cAAC,CAAC,AACR,SAAS,CAAE,IAAI,AACnB,CAAC,AACD,GAAG,cAAC,CAAC,AACD,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,GAAG,cAAC,CAAC,AACD,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,QAAQ,cAAC,CAAC,AACN,SAAS,CAAE,CAAC,AAChB,CAAC,AACD,SAAS,cAAC,CAAC,AACP,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,QAAQ,cAAC,CAAC,AACN,IAAI,CAAE,CAAC,CAAC,CAAC,CACT,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,IAAI,CACZ,eAAe,CAAE,MAAM,AAC3B,CAAC"
}