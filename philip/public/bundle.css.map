{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/Publish.svelte",
    "../src/Post.svelte",
    "../src/PostBody.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { getCreateObject, getHashTag } from \"./utils/pubGate\";\n\n  export let reply = null;\n  export let session;\n\n  let inProgress = false;\n  let content = \"\";\n\n  const hashTagMatcher = /(^|\\W)(#[a-z\\d][\\w-]*)/gi;\n\n  const wrapHashTagsWithLink = text =>\n    text.match(hashTagMatcher)\n      ? text.replace(hashTagMatcher, '$1<a href=\"\" rel=\"tag\">$2</a>')\n      : text;\n\n  const getAllHashTags = text => text.match(hashTagMatcher) || [];\n\n  const publish = async ev => {\n    ev.preventDefault();\n\n    inProgress = true;\n    let tags = getAllHashTags(content)\n      .map(v => v.trim())\n      .map(getHashTag);\n\n    const data = wrapHashTagsWithLink(content);\n\n    let ap_object = getCreateObject(data, tags);\n\n    if (reply) {\n      ap_object.object.inReplyTo = reply.id;\n      ap_object.cc = [reply.attributedTo];\n    }\n\n    try {\n      const response = await fetch(session.user.outbox, {\n        method: \"POST\",\n        body: JSON.stringify(ap_object),\n        headers: { Authorization: \"Bearer \" + session.token },\n      });\n      const data = await response.json();\n    } catch (e) {\n      console.log(e);\n    }\n\n    inProgress = false;\n    content = \"\";\n  };\n</script>\n\n<style>\n  textarea {\n    width: 100%;\n  }\n</style>\n\n<form on:submit={publish}>\n\n  <fieldset class=\"form-group\">\n    <textarea\n      class=\"form-control\"\n      placeholder=\"Write your text here\"\n      bind:value={content} />\n  </fieldset>\n\n  <button\n    class=\"btn btn-sm pull-xs-right btn-info\"\n    disabled={!content || inProgress}>\n    Publish\n  </button>\n\n</form>\n",
    "\n<script>\n\texport let post;\n\texport let session;\n\timport PostBody from \"./PostBody.svelte\";\n\timport xhr from \"./utils/xhr\";\n\n\tlet fpost;\n\tlet post_object;\n\tlet fetched_post = false;\n\n\tif ([\"Announce\", \"Like\"].includes(post.type)) {\n\t    if (typeof post.object === \"string\") {\n\t        fpost = xhr(post.object);\n\n            // fpost = fetch(post.object, { headers: {\n            //     \"Accept\": \"application/activity+json\"\n            // }}).then(d => d.json());\n            post_object = fpost => fpost.object;\n\t    } else {\n\t        post_object = post.object;\n\t    }\n\n\t    fetched_post = true\n    }\n</script>\n\n<style>\n    .reaction {\n        margin-left: 30px;\n    }\n</style>\n\n{#if fetched_post == false}\n<li class=\"post\">\n    <h2 id=\"\"> . </h2>\n    <PostBody post={post.object} session={session}/>\n</li>\n\n{:else}\n<li class=\"post\">\n    <div class=\"metadata\">\n        <h2 id=\"\"> . </h2>\n        <a href=\"{post.id}\">{post.type}</a> by user <a href=\"{ post.actor }\">{ post.actor.split('/').slice(-1)[0] }</a>\n        <span class=\"metadata-seperator\">·</span>\n\n        {#if post.published }\n        <span>{ post.published.replace(\"T\", \" \").replace(\"Z\", \" \") }</span>\n        {/if}\n    </div>\n    <div class=\"reaction\">\n        <PostBody post={post_object} session={session}/>\n    </div>\n</li>\n{/if}\n",
    "\n<script>\n\texport let post;\n\texport let session;\n\timport Publish from \"./Publish.svelte\";\n</script>\n<style>\n.reactionz {\n    border-radius: 0 0 3px 3px;\n    color: #1c1e21;\n    display: flex;\n    flex-direction: column;\n    font-size: 13px;\n    width: 100%;\n    position: relative;\n    word-wrap: break-word;\n    margin-right: -1px;\n    outline: none;\n    padding-left: 1px;\n}\n.reaction_stats {\n    position: relative;\n}\n.reaction_actions {\n    display: flex;\n    margin: 0 12px;\n    min-height: 32px;\n    padding: 4px 0;\n}\n\n.rs1 {\n    align-items: center;\n    border-bottom: 1px solid #dadde1;\n    color: #606770;\n    display: flex;\n    line-height: 20px;\n    margin: 10px 12px 0 12px;\n    padding: 0 0 10px 0;\n}\n.ra1 {\n    display: flex;\n    flex-direction: row;\n    flex-grow: 1;\n    order: 1;\n}\n\n.rs_left {\n    align-items: center;\n    display: flex;\n    flex-grow: 1;\n    overflow: hidden;\n}\n.rs_center {\n    flex-grow: 0;\n    flex-shrink: 0;\n    width: 7px;\n}\n.rs_right {\n    display: flex;\n    flex-shrink: 0;\n}\n.ra_item {\n    align-items: center;\n    display: flex;\n    flex: 1 0;\n    justify-content: center;\n}\n\n.rs_like {\n    color: inherit;\n    display: block;\n    line-height: 16px;\n    max-height: 16px;\n    overflow: hidden;\n}\n.rs_like2 {\n    float: left;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: 100px;\n}\n\n._42ft {\n    cursor: pointer;\n    display: inline-block;\n    text-decoration: none;\n    white-space: nowrap;\n}\n.rs_right {\n    margin-left: 7px;\n}\n\n._18vj {\n    align-items: center;\n    color: #606770;\n    display: flex;\n    flex: 1 0;\n    font-weight: 600;\n    height: 32px;\n    justify-content: center;\n    line-height: 14px;\n    padding: 0 2px;\n    position: relative;\n    text-decoration: none;\n    transition: 400ms cubic-bezier(.08,.52,.52,1) transform;\n}\n.ra_like {\n    z-index: 6;\n}\n\n.ra_announce {\n    display: flex;\n    flex: 1 0;\n    justify-content: center;\n}\n</style>\n\n\n{#if typeof post === 'string'}\n    <p>{@html post }</p>\n\n{:else}\n    <div class=\"metadata\">\n        <a href=\"{post.id}\">{post.type}</a> by user <a href=\"{ post.attributedTo }\">{ post.attributedTo.split('/').pop() }</a>\n        <span class=\"metadata-seperator\">·</span>\n        <span>{ post.published.replace(\"T\", \" \").replace(\"Z\", \" \")}</span>\n    </div>\n    {#if post.tag}\n        <div class=\"tags\">\n        {#each post.tag as tag}\n            {#if tag.type == 'Hashtag'}\n                <a class=\"tag\" href=\"{ tag.href }\">{ tag.name }</a>\n            {/if}\n        {/each}\n        </div>\n    {/if}\n\n    <p>{@html post.content }</p>\n    {#if post.attachment}\n        {#each post.attachment as attachment}\n            {#if attachment.type === \"Document\" && attachment.mediaType.startsWith(\"image\")}\n                <img src={attachment.url} >\n            {/if}\n        {/each}\n    {/if}\n{/if}\n\n<div class=\"reactionz\">\n    <div class=\"reaction_stats\">\n        <div class=\"rs1\">\n            <div class=\"rs_left\">\n                <a href=\"\" rel=\"dialog\" class=\"rs_like\" tabindex=\"0\" role=\"button\">\n                    <span aria-hidden=\"true\" class=\"rs_like2\">N likes</span>\n                 </a>\n            </div>\n            <div class=\"rs_center\"></div>\n            <div class=\"rs_right\">\n                <span class=\"rs_right\" >\n                    <a class=\"_42ft\" data-ft=\"\" role=\"button\" href=\"\">N comments</a>\n                </span>\n                <span class=\"rs_right\">\n                    <a class=\"_42ft\" href=\"\" rel=\"dialog\">N announces</a>\n                </span>\n            </div>\n        </div>\n    </div>\n    {#if session.user }\n        <div class=\"reaction_actions\">\n            <div class=\"ra1\">\n                <span class=\"ra_item\">\n                    <a aria-pressed=\"false\" class=\"ra_like  _18vj\"\n                    href=\"\" role=\"button\" tabindex=\"-1\">Like</a>\n                </span>\n                <span class=\"ra_item\">\n                    <a class=\"_18vj _42ft\" role=\"button\"\n                    tabindex=\"0\" href=\"\">Add comment</a>\n                </span>\n                <span class=\"ra_item\">\n                    <span class=\"ra_announce\">\n                        <div>\n                            <a class=\"_18vj\" href=\"\" role=\"button\"\n                            tabindex=\"0\" >Announce</a>\n                        </div>\n                    </span>\n                </span>\n            </div>\n        </div>\n        <Publish reply={post} session={session}/>\n    {/if}\n</div>\n\n\n\n"
  ],
  "names": [],
  "mappings": "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"
}